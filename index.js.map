{"version":3,"file":"index.js","sources":["../src/js/work-together.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst forms = document.querySelector('.work-together-form');\nconst messageInvalid = document.querySelector('.input-signature');\nconst buttonSendMessage = document.querySelector('.work-together-button');\nconst validMail = document.querySelector('.input-icon');\nconst messageText = document.querySelector('.modal-window-paragraph');\nconst modalWindow = document.querySelector('.work-together-modal');\nconst closeButtonModal = document.querySelector('.modal-window-button');\n\nconst message = {\n  email: '',\n  message: '',\n};\n\nfunction formObject(event) {\n  const form = event.currentTarget;\n  const inpyt = form.email.value.trim();\n  const textarea = form.message.value.trim();\n  message.email = `${inpyt}`;\n  message.message = `${textarea}`;\n  localStorage.setItem('feedback-form-state', JSON.stringify(message));\n\n  if (inpyt.includes('.') && inpyt.includes('@')) {\n    validMail.classList.remove('is-close-input-icon');\n    messageInvalid.classList.add('is-close-input-signature');\n  } else if (inpyt === '') {\n    validMail.classList.add('is-close-input-icon');\n    messageInvalid.classList.add('is-close-input-signature');\n  } else {\n    validMail.classList.add('is-close-input-icon');\n    messageInvalid.classList.remove('is-close-input-signature');\n  }\n}\n\nforms.addEventListener('input', formObject);\n\nasync function sendingAsRequest(event) {\n  event.preventDefault();\n  const input = event.target;\n  const yourEmail = input.elements.email.value.trim();\n  const textareaMessage = input.elements.message.value.trim();\n  try {\n    const posts = await postRequest(yourEmail, textareaMessage);\n    messageText.textContent = posts.data.message;\n    modalWindow.classList.remove('is-close-modal');\n\n    const textarea = document.querySelector('.work-together-textarea');\n    const email = document.querySelector('.work-together-input');\n\n    localStorage.removeItem('feedback-form-state');\n    message.email = '';\n    message.message = '';\n    email.value = '';\n    textarea.value = '';\n    validMail.classList.add('is-close-input-icon');\n  } catch (error) {\n    iziToast.warning({\n      backgroundColor: '#F4A460',\n      position: 'center',\n      message:\n        'Sorry! Something went wrong, please check that all fields are filled in correctly.',\n    });\n    console.log(error);\n  }\n}\nforms.addEventListener('submit', sendingAsRequest);\n\nasync function postRequest(email, comment) {\n  try {\n    const request = await axios.post(\n      'https://portfolio-js.b.goit.study/api/requests',\n      {\n        email: `${email}`,\n        comment: `${comment}`,\n      }\n    );\n    return request;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction closeWindow(event) {\n  modalWindow.classList.add('is-close-modal');\n  if (event.key === 'Escape') {\n    modalWindow.classList.add('is-close-modal');\n  }\n}\ncloseButtonModal.addEventListener('click', closeWindow);\ndocument.addEventListener('keydown', closeWindow);\nmodalWindow.addEventListener('click', closeWindow);\n"],"names":["forms","messageInvalid","validMail","messageText","modalWindow","closeButtonModal","message","formObject","event","form","inpyt","textarea","sendingAsRequest","input","yourEmail","textareaMessage","posts","postRequest","email","error","iziToast","comment","axios","closeWindow"],"mappings":"6vBAIA,MAAMA,EAAQ,SAAS,cAAc,qBAAqB,EACpDC,EAAiB,SAAS,cAAc,kBAAkB,EACtC,SAAS,cAAc,uBAAuB,EACxE,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,cAAc,yBAAyB,EAC9DC,EAAc,SAAS,cAAc,sBAAsB,EAC3DC,EAAmB,SAAS,cAAc,sBAAsB,EAEhEC,EAAU,CACd,MAAO,GACP,QAAS,EACX,EAEA,SAASC,EAAWC,EAAO,CACzB,MAAMC,EAAOD,EAAM,cACbE,EAAQD,EAAK,MAAM,MAAM,KAAI,EAC7BE,EAAWF,EAAK,QAAQ,MAAM,KAAI,EACxCH,EAAQ,MAAQ,GAAGI,CAAK,GACxBJ,EAAQ,QAAU,GAAGK,CAAQ,GAC7B,aAAa,QAAQ,sBAAuB,KAAK,UAAUL,CAAO,CAAC,EAE/DI,EAAM,SAAS,GAAG,GAAKA,EAAM,SAAS,GAAG,GAC3CR,EAAU,UAAU,OAAO,qBAAqB,EAChDD,EAAe,UAAU,IAAI,0BAA0B,GAC9CS,IAAU,IACnBR,EAAU,UAAU,IAAI,qBAAqB,EAC7CD,EAAe,UAAU,IAAI,0BAA0B,IAEvDC,EAAU,UAAU,IAAI,qBAAqB,EAC7CD,EAAe,UAAU,OAAO,0BAA0B,EAE9D,CAEAD,EAAM,iBAAiB,QAASO,CAAU,EAE1C,eAAeK,EAAiBJ,EAAO,CACrCA,EAAM,eAAc,EACpB,MAAMK,EAAQL,EAAM,OACdM,EAAYD,EAAM,SAAS,MAAM,MAAM,OACvCE,EAAkBF,EAAM,SAAS,QAAQ,MAAM,OACrD,GAAI,CACF,MAAMG,EAAQ,MAAMC,EAAYH,EAAWC,CAAe,EAC1DZ,EAAY,YAAca,EAAM,KAAK,QACrCZ,EAAY,UAAU,OAAO,gBAAgB,EAE7C,MAAMO,EAAW,SAAS,cAAc,yBAAyB,EAC3DO,EAAQ,SAAS,cAAc,sBAAsB,EAE3D,aAAa,WAAW,qBAAqB,EAC7CZ,EAAQ,MAAQ,GAChBA,EAAQ,QAAU,GAClBY,EAAM,MAAQ,GACdP,EAAS,MAAQ,GACjBT,EAAU,UAAU,IAAI,qBAAqB,CAC9C,OAAQiB,EAAO,CACdC,EAAS,QAAQ,CACf,gBAAiB,UACjB,SAAU,SACV,QACE,oFACR,CAAK,EACD,QAAQ,IAAID,CAAK,CAClB,CACH,CACAnB,EAAM,iBAAiB,SAAUY,CAAgB,EAEjD,eAAeK,EAAYC,EAAOG,EAAS,CACzC,GAAI,CAQF,OAPgB,MAAMC,EAAM,KAC1B,iDACA,CACE,MAAO,GAAGJ,CAAK,GACf,QAAS,GAAGG,CAAO,EACpB,CACP,CAEG,OAAQF,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEA,SAASI,EAAYf,EAAO,CAC1BJ,EAAY,UAAU,IAAI,gBAAgB,EACtCI,EAAM,MAAQ,UAChBJ,EAAY,UAAU,IAAI,gBAAgB,CAE9C,CACAC,EAAiB,iBAAiB,QAASkB,CAAW,EACtD,SAAS,iBAAiB,UAAWA,CAAW,EAChDnB,EAAY,iBAAiB,QAASmB,CAAW"}